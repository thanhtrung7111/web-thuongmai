{
  "version": 3,
  "sources": ["../../blob-util/dist/blob-util.es.js"],
  "sourcesContent": ["// TODO: including these in blob-util.ts causes typedoc to generate docs for them,\n// even with --excludePrivate ¯\\_(ツ)_/¯\n/** @private */\nfunction loadImage(src, crossOrigin) {\n    return new Promise(function (resolve, reject) {\n        var img = new Image();\n        if (crossOrigin) {\n            img.crossOrigin = crossOrigin;\n        }\n        img.onload = function () {\n            resolve(img);\n        };\n        img.onerror = reject;\n        img.src = src;\n    });\n}\n/** @private */\nfunction imgToCanvas(img) {\n    var canvas = document.createElement('canvas');\n    canvas.width = img.width;\n    canvas.height = img.height;\n    // copy the image contents to the canvas\n    var context = canvas.getContext('2d');\n    context.drawImage(img, 0, 0, img.width, img.height, 0, 0, img.width, img.height);\n    return canvas;\n}\n\n/* global Promise, Image, Blob, FileReader, atob, btoa,\n   BlobBuilder, MSBlobBuilder, MozBlobBuilder, WebKitBlobBuilder, webkitURL */\n/**\n * Shim for\n * [`new Blob()`](https://developer.mozilla.org/en-US/docs/Web/API/Blob.Blob)\n * to support\n * [older browsers that use the deprecated `BlobBuilder` API](http://caniuse.com/blob).\n *\n * Example:\n *\n * ```js\n * var myBlob = blobUtil.createBlob(['hello world'], {type: 'text/plain'});\n * ```\n *\n * @param parts - content of the Blob\n * @param properties - usually `{type: myContentType}`,\n *                           you can also pass a string for the content type\n * @returns Blob\n */\nfunction createBlob(parts, properties) {\n    parts = parts || [];\n    properties = properties || {};\n    if (typeof properties === 'string') {\n        properties = { type: properties }; // infer content type\n    }\n    try {\n        return new Blob(parts, properties);\n    }\n    catch (e) {\n        if (e.name !== 'TypeError') {\n            throw e;\n        }\n        var Builder = typeof BlobBuilder !== 'undefined'\n            ? BlobBuilder : typeof MSBlobBuilder !== 'undefined'\n            ? MSBlobBuilder : typeof MozBlobBuilder !== 'undefined'\n            ? MozBlobBuilder : WebKitBlobBuilder;\n        var builder = new Builder();\n        for (var i = 0; i < parts.length; i += 1) {\n            builder.append(parts[i]);\n        }\n        return builder.getBlob(properties.type);\n    }\n}\n/**\n * Shim for\n * [`URL.createObjectURL()`](https://developer.mozilla.org/en-US/docs/Web/API/URL.createObjectURL)\n * to support browsers that only have the prefixed\n * `webkitURL` (e.g. Android <4.4).\n *\n * Example:\n *\n * ```js\n * var myUrl = blobUtil.createObjectURL(blob);\n * ```\n *\n * @param blob\n * @returns url\n */\nfunction createObjectURL(blob) {\n    return (typeof URL !== 'undefined' ? URL : webkitURL).createObjectURL(blob);\n}\n/**\n * Shim for\n * [`URL.revokeObjectURL()`](https://developer.mozilla.org/en-US/docs/Web/API/URL.revokeObjectURL)\n * to support browsers that only have the prefixed\n * `webkitURL` (e.g. Android <4.4).\n *\n * Example:\n *\n * ```js\n * blobUtil.revokeObjectURL(myUrl);\n * ```\n *\n * @param url\n */\nfunction revokeObjectURL(url) {\n    return (typeof URL !== 'undefined' ? URL : webkitURL).revokeObjectURL(url);\n}\n/**\n * Convert a `Blob` to a binary string.\n *\n * Example:\n *\n * ```js\n * blobUtil.blobToBinaryString(blob).then(function (binaryString) {\n *   // success\n * }).catch(function (err) {\n *   // error\n * });\n * ```\n *\n * @param blob\n * @returns Promise that resolves with the binary string\n */\nfunction blobToBinaryString(blob) {\n    return new Promise(function (resolve, reject) {\n        var reader = new FileReader();\n        var hasBinaryString = typeof reader.readAsBinaryString === 'function';\n        reader.onloadend = function () {\n            var result = reader.result || '';\n            if (hasBinaryString) {\n                return resolve(result);\n            }\n            resolve(arrayBufferToBinaryString(result));\n        };\n        reader.onerror = reject;\n        if (hasBinaryString) {\n            reader.readAsBinaryString(blob);\n        }\n        else {\n            reader.readAsArrayBuffer(blob);\n        }\n    });\n}\n/**\n * Convert a base64-encoded string to a `Blob`.\n *\n * Example:\n *\n * ```js\n * var blob = blobUtil.base64StringToBlob(base64String);\n * ```\n * @param base64 - base64-encoded string\n * @param type - the content type (optional)\n * @returns Blob\n */\nfunction base64StringToBlob(base64, type) {\n    var parts = [binaryStringToArrayBuffer(atob(base64))];\n    return type ? createBlob(parts, { type: type }) : createBlob(parts);\n}\n/**\n * Convert a binary string to a `Blob`.\n *\n * Example:\n *\n * ```js\n * var blob = blobUtil.binaryStringToBlob(binaryString);\n * ```\n *\n * @param binary - binary string\n * @param type - the content type (optional)\n * @returns Blob\n */\nfunction binaryStringToBlob(binary, type) {\n    return base64StringToBlob(btoa(binary), type);\n}\n/**\n * Convert a `Blob` to a binary string.\n *\n * Example:\n *\n * ```js\n * blobUtil.blobToBase64String(blob).then(function (base64String) {\n *   // success\n * }).catch(function (err) {\n *   // error\n * });\n * ```\n *\n * @param blob\n * @returns Promise that resolves with the binary string\n */\nfunction blobToBase64String(blob) {\n    return blobToBinaryString(blob).then(btoa);\n}\n/**\n * Convert a data URL string\n * (e.g. `'data:image/png;base64,iVBORw0KG...'`)\n * to a `Blob`.\n *\n * Example:\n *\n * ```js\n * var blob = blobUtil.dataURLToBlob(dataURL);\n * ```\n *\n * @param dataURL - dataURL-encoded string\n * @returns Blob\n */\nfunction dataURLToBlob(dataURL) {\n    var type = dataURL.match(/data:([^;]+)/)[1];\n    var base64 = dataURL.replace(/^[^,]+,/, '');\n    var buff = binaryStringToArrayBuffer(atob(base64));\n    return createBlob([buff], { type: type });\n}\n/**\n * Convert a `Blob` to a data URL string\n * (e.g. `'data:image/png;base64,iVBORw0KG...'`).\n *\n * Example:\n *\n * ```js\n * var dataURL = blobUtil.blobToDataURL(blob);\n * ```\n *\n * @param blob\n * @returns Promise that resolves with the data URL string\n */\nfunction blobToDataURL(blob) {\n    return blobToBase64String(blob).then(function (base64String) {\n        return 'data:' + blob.type + ';base64,' + base64String;\n    });\n}\n/**\n * Convert an image's `src` URL to a data URL by loading the image and painting\n * it to a `canvas`.\n *\n * Note: this will coerce the image to the desired content type, and it\n * will only paint the first frame of an animated GIF.\n *\n * Examples:\n *\n * ```js\n * blobUtil.imgSrcToDataURL('http://mysite.com/img.png').then(function (dataURL) {\n *   // success\n * }).catch(function (err) {\n *   // error\n * });\n * ```\n *\n * ```js\n * blobUtil.imgSrcToDataURL('http://some-other-site.com/img.jpg', 'image/jpeg',\n *                          'Anonymous', 1.0).then(function (dataURL) {\n *   // success\n * }).catch(function (err) {\n *   // error\n * });\n * ```\n *\n * @param src - image src\n * @param type - the content type (optional, defaults to 'image/png')\n * @param crossOrigin - for CORS-enabled images, set this to\n *                                         'Anonymous' to avoid \"tainted canvas\" errors\n * @param quality - a number between 0 and 1 indicating image quality\n *                                     if the requested type is 'image/jpeg' or 'image/webp'\n * @returns Promise that resolves with the data URL string\n */\nfunction imgSrcToDataURL(src, type, crossOrigin, quality) {\n    type = type || 'image/png';\n    return loadImage(src, crossOrigin).then(imgToCanvas).then(function (canvas) {\n        return canvas.toDataURL(type, quality);\n    });\n}\n/**\n * Convert a `canvas` to a `Blob`.\n *\n * Examples:\n *\n * ```js\n * blobUtil.canvasToBlob(canvas).then(function (blob) {\n *   // success\n * }).catch(function (err) {\n *   // error\n * });\n * ```\n *\n * Most browsers support converting a canvas to both `'image/png'` and `'image/jpeg'`. You may\n * also want to try `'image/webp'`, which will work in some browsers like Chrome (and in other browsers, will just fall back to `'image/png'`):\n *\n * ```js\n * blobUtil.canvasToBlob(canvas, 'image/webp').then(function (blob) {\n *   // success\n * }).catch(function (err) {\n *   // error\n * });\n * ```\n *\n * @param canvas - HTMLCanvasElement\n * @param type - the content type (optional, defaults to 'image/png')\n * @param quality - a number between 0 and 1 indicating image quality\n *                                     if the requested type is 'image/jpeg' or 'image/webp'\n * @returns Promise that resolves with the `Blob`\n */\nfunction canvasToBlob(canvas, type, quality) {\n    if (typeof canvas.toBlob === 'function') {\n        return new Promise(function (resolve) {\n            canvas.toBlob(resolve, type, quality);\n        });\n    }\n    return Promise.resolve(dataURLToBlob(canvas.toDataURL(type, quality)));\n}\n/**\n * Convert an image's `src` URL to a `Blob` by loading the image and painting\n * it to a `canvas`.\n *\n * Note: this will coerce the image to the desired content type, and it\n * will only paint the first frame of an animated GIF.\n *\n * Examples:\n *\n * ```js\n * blobUtil.imgSrcToBlob('http://mysite.com/img.png').then(function (blob) {\n *   // success\n * }).catch(function (err) {\n *   // error\n * });\n * ```\n *\n * ```js\n * blobUtil.imgSrcToBlob('http://some-other-site.com/img.jpg', 'image/jpeg',\n *                          'Anonymous', 1.0).then(function (blob) {\n *   // success\n * }).catch(function (err) {\n *   // error\n * });\n * ```\n *\n * @param src - image src\n * @param type - the content type (optional, defaults to 'image/png')\n * @param crossOrigin - for CORS-enabled images, set this to\n *                                         'Anonymous' to avoid \"tainted canvas\" errors\n * @param quality - a number between 0 and 1 indicating image quality\n *                                     if the requested type is 'image/jpeg' or 'image/webp'\n * @returns Promise that resolves with the `Blob`\n */\nfunction imgSrcToBlob(src, type, crossOrigin, quality) {\n    type = type || 'image/png';\n    return loadImage(src, crossOrigin).then(imgToCanvas).then(function (canvas) {\n        return canvasToBlob(canvas, type, quality);\n    });\n}\n/**\n * Convert an `ArrayBuffer` to a `Blob`.\n *\n * Example:\n *\n * ```js\n * var blob = blobUtil.arrayBufferToBlob(arrayBuff, 'audio/mpeg');\n * ```\n *\n * @param buffer\n * @param type - the content type (optional)\n * @returns Blob\n */\nfunction arrayBufferToBlob(buffer, type) {\n    return createBlob([buffer], type);\n}\n/**\n * Convert a `Blob` to an `ArrayBuffer`.\n *\n * Example:\n *\n * ```js\n * blobUtil.blobToArrayBuffer(blob).then(function (arrayBuff) {\n *   // success\n * }).catch(function (err) {\n *   // error\n * });\n * ```\n *\n * @param blob\n * @returns Promise that resolves with the `ArrayBuffer`\n */\nfunction blobToArrayBuffer(blob) {\n    return new Promise(function (resolve, reject) {\n        var reader = new FileReader();\n        reader.onloadend = function () {\n            var result = reader.result || new ArrayBuffer(0);\n            resolve(result);\n        };\n        reader.onerror = reject;\n        reader.readAsArrayBuffer(blob);\n    });\n}\n/**\n * Convert an `ArrayBuffer` to a binary string.\n *\n * Example:\n *\n * ```js\n * var myString = blobUtil.arrayBufferToBinaryString(arrayBuff)\n * ```\n *\n * @param buffer - array buffer\n * @returns binary string\n */\nfunction arrayBufferToBinaryString(buffer) {\n    var binary = '';\n    var bytes = new Uint8Array(buffer);\n    var length = bytes.byteLength;\n    var i = -1;\n    while (++i < length) {\n        binary += String.fromCharCode(bytes[i]);\n    }\n    return binary;\n}\n/**\n * Convert a binary string to an `ArrayBuffer`.\n *\n * ```js\n * var myBuffer = blobUtil.binaryStringToArrayBuffer(binaryString)\n * ```\n *\n * @param binary - binary string\n * @returns array buffer\n */\nfunction binaryStringToArrayBuffer(binary) {\n    var length = binary.length;\n    var buf = new ArrayBuffer(length);\n    var arr = new Uint8Array(buf);\n    var i = -1;\n    while (++i < length) {\n        arr[i] = binary.charCodeAt(i);\n    }\n    return buf;\n}\n\nexport { createBlob, createObjectURL, revokeObjectURL, blobToBinaryString, base64StringToBlob, binaryStringToBlob, blobToBase64String, dataURLToBlob, blobToDataURL, imgSrcToDataURL, canvasToBlob, imgSrcToBlob, arrayBufferToBlob, blobToArrayBuffer, arrayBufferToBinaryString, binaryStringToArrayBuffer };\n"],
  "mappings": "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",
  "names": []
}
